<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Busan Trip</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
        }
        /* æµªæ¼«æ¨™é¡Œå­—é«” */
        .font-romantic {
            font-family: 'Great Vibes', cursive;
        }
        
        /* ç…™ç«èƒŒæ™¯å‹•ç•« (æ¨¡æ“¬ GIF æ•ˆæœ) */
        .fireworks-bg {
            background-color: #0f172a; /* æ·±è—å¤œç©º */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(255, 200, 200, 0.1) 0%, transparent 20%),
                url('https://images.unsplash.com/photo-1498931299472-f7a63a5a1cfa?q=80&w=2073&auto=format&fit=crop'); /* ç…™ç«åº•åœ– */
            background-size: cover;
            background-position: center;
            background-blend-mode: screen;
            animation: bg-pulse 10s infinite alternate;
        }

        @keyframes bg-pulse {
            0% { filter: brightness(1); }
            100% { filter: brightness(1.2); }
        }

        /* è¼¸å…¥æ¡†å»èƒŒæ¨£å¼ */
        .input-ghost {
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.5);
            color: white;
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }
        .input-ghost:focus {
            border-bottom: 1px solid white;
        }
        
        /* éš±è—æ²è»¸ä½†å¯æ»¾å‹• */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <div id="app" class="relative min-h-screen flex flex-col">
        
        <div class="fixed bottom-6 right-6 z-50 flex gap-3">
            <button @click="triggerImport" class="bg-gray-800 hover:bg-gray-700 text-white p-4 rounded-full shadow-lg transition-all transform hover:scale-105 tooltip" title="åŒ¯å…¥è¡Œç¨‹">
                <i class="fas fa-file-import fa-lg"></i>
            </button>
            <button @click="exportData" class="bg-indigo-600 hover:bg-indigo-500 text-white p-4 rounded-full shadow-lg transition-all transform hover:scale-105 tooltip" title="åŒ¯å‡ºè¡Œç¨‹">
                <i class="fas fa-file-export fa-lg"></i>
            </button>
            <input type="file" ref="fileInput" class="hidden" accept=".json" @change="handleFileUpload">
        </div>

        <nav v-if="currentPage !== 'welcome'" class="bg-white shadow-sm sticky top-0 z-40">
            <div class="max-w-md mx-auto px-4">
                <div class="flex justify-between h-14 items-center text-sm font-medium text-gray-500">
                    <button @click="currentPage = 'home'" :class="{'text-indigo-600 border-b-2 border-indigo-600': currentPage === 'home'}" class="h-full px-2">é¦–é </button>
                    <button @click="currentPage = 'itinerary'" :class="{'text-indigo-600 border-b-2 border-indigo-600': currentPage === 'itinerary'}" class="h-full px-2">è¡Œç¨‹è¡¨</button>
                    <button @click="currentPage = 'todos'" :class="{'text-indigo-600 border-b-2 border-indigo-600': currentPage === 'todos'}" class="h-full px-2">å¾…è¾¦äº‹é …</button>
                    <button @click="currentPage = 'welcome'" class="h-full px-2 text-gray-400"><i class="fas fa-cog"></i></button>
                </div>
            </div>
        </nav>

        <div v-if="currentPage === 'welcome'" class="flex-grow flex flex-col items-center justify-center text-white fireworks-bg relative overflow-hidden">
            <div class="absolute inset-0 pointer-events-none opacity-30">
                 </div>

            <div class="z-10 text-center px-6 animate-fade-in-up">
                <p class="text-xl tracking-widest uppercase mb-2 text-indigo-200">Our Next Adventure</p>
                <h1 class="text-7xl mb-4 font-romantic text-shadow shadow-indigo-900/50">2026 Busan Trip</h1>
                <p class="text-lg text-gray-300 font-light mb-12">Fireworks, Ocean, and Unforgettable Memories.</p>

                <div class="grid grid-cols-4 gap-4 mb-12 max-w-sm mx-auto">
                    <div v-for="(value, label) in countdown" :key="label" class="bg-white/10 backdrop-blur-md rounded-lg p-3">
                        <div class="text-3xl font-bold">{{ value }}</div>
                        <div class="text-xs uppercase opacity-75">{{ label }}</div>
                    </div>
                </div>

                <div class="flex items-center justify-center gap-4 text-xl mb-12">
                    <input v-model="userSettings.userName" class="input-ghost w-24" placeholder="Your Name">
                    <span class="font-romantic text-3xl">&</span>
                    <input v-model="userSettings.partnerName" class="input-ghost w-24" placeholder="Partner">
                </div>

                <button @click="currentPage = 'home'" class="bg-white text-indigo-900 px-8 py-3 rounded-full font-semibold hover:bg-indigo-50 transition shadow-lg flex items-center gap-2 mx-auto">
                    Start Planning <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <div v-if="currentPage === 'home'" class="max-w-md mx-auto w-full p-4 space-y-6 pb-24">
            <header class="bg-indigo-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden">
                <div class="absolute right-0 top-0 opacity-10 transform translate-x-4 -translate-y-4">
                    <i class="fas fa-plane fa-8x"></i>
                </div>
                <h2 class="text-2xl font-bold mb-1">Hi, {{ userSettings.userName }}!</h2>
                <p class="opacity-90">è·é›¢é‡œå±±ä¹‹æ—…é‚„æœ‰ {{ countdown.days }} å¤©</p>
                <div class="mt-4 flex gap-2">
                    <span class="px-3 py-1 bg-white/20 rounded-full text-xs backdrop-blur-sm">2026.03.27 å‡ºç™¼</span>
                    <span class="px-3 py-1 bg-white/20 rounded-full text-xs backdrop-blur-sm">8 å¤© 7 å¤œ</span>
                </div>
            </header>

            <section class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-bold text-gray-800"><i class="fas fa-cloud-sun text-yellow-500 mr-2"></i>é‡œå±±æ°£å€™é æ¸¬</h3>
                    <span class="text-xs text-gray-400">æ­·å²å‡æº«åƒè€ƒ</span>
                </div>
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="text-4xl">ğŸŒ¤ï¸</div>
                        <div>
                            <div class="text-2xl font-bold text-gray-800">14Â°C</div>
                            <div class="text-xs text-gray-500">æ—©æ™šåæ¶¼ / èˆ’é©</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-medium text-indigo-600 mb-1">ç©¿æ­å»ºè­°</div>
                        <p class="text-xs text-gray-600 max-w-[140px] leading-tight">
                            æ¨è–¦é¢¨è¡£å¤–å¥—æ­é…è–„é•·è¢–ã€‚æ™šä¸Šæµ·é‚Šé¢¨å¤§ï¼Œå»ºè­°æ”œå¸¶åœå·¾ã€‚
                        </p>
                    </div>
                </div>
            </section>

            <section>
                <div class="flex justify-between items-center mb-3 px-1">
                    <h3 class="font-bold text-gray-800">å¾…è¾¦äº‹é … ({{ pendingTodos }} remaining)</h3>
                    <button @click="currentPage = 'todos'" class="text-indigo-600 text-sm">æŸ¥çœ‹å…¨éƒ¨</button>
                </div>
                <div class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100 space-y-3">
                    <div v-for="todo in priorityTodos" :key="todo.id" class="flex items-center gap-3">
                        <div @click="toggleTodo(todo.id)" 
                             class="w-5 h-5 rounded-full border-2 flex items-center justify-center cursor-pointer transition-colors"
                             :class="todo.completed ? 'bg-green-500 border-green-500' : 'border-gray-300'">
                            <i v-if="todo.completed" class="fas fa-check text-white text-xs"></i>
                        </div>
                        <span :class="{'line-through text-gray-400': todo.completed}" class="text-sm text-gray-700">{{ todo.text }}</span>
                    </div>
                </div>
            </section>

            <div class="grid grid-cols-2 gap-4">
                <button @click="currentPage = 'itinerary'" class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center justify-center gap-2 hover:bg-gray-50 transition">
                    <div class="w-10 h-10 rounded-full bg-pink-100 text-pink-500 flex items-center justify-center"><i class="fas fa-map-marked-alt"></i></div>
                    <span class="font-medium text-gray-700">è©³ç´°è¡Œç¨‹</span>
                </button>
                <button class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center justify-center gap-2 hover:bg-gray-50 transition">
                    <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-500 flex items-center justify-center"><i class="fas fa-wallet"></i></div>
                    <span class="font-medium text-gray-700">é ç®—ç®¡ç†</span>
                </button>
            </div>
        </div>

        <div v-if="currentPage === 'itinerary'" class="max-w-md mx-auto w-full p-4 pb-24">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">My Itinerary</h2>
            
            <div class="space-y-6">
                <div v-for="(day, index) in itinerary" :key="index" class="relative pl-6 border-l-2 border-indigo-100">
                    <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-indigo-500 ring-4 ring-white"></div>
                    
                    <div class="mb-2 flex items-baseline gap-2">
                        <h3 class="font-bold text-lg text-gray-800">Day {{ index + 1 }}</h3>
                        <span class="text-sm text-gray-500">{{ day.date }}</span>
                        <span class="ml-auto text-xs font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded">{{ day.theme }}</span>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 space-y-4">
                        <div v-for="(spot, sIndex) in day.spots" :key="sIndex" class="flex gap-3">
                            <div class="text-xs font-bold text-gray-400 w-10 pt-1">{{ spot.time }}</div>
                            <div class="flex-1">
                                <div class="font-medium text-gray-800">{{ spot.name }}</div>
                                <div class="text-xs text-gray-500 mt-1 flex gap-2">
                                    <span v-if="spot.tag" class="bg-gray-100 px-1.5 py-0.5 rounded text-gray-500">{{ spot.tag }}</span>
                                    <span v-if="spot.note" class="text-orange-500"><i class="fas fa-exclamation-circle"></i> {{ spot.note }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="currentPage === 'todos'" class="max-w-md mx-auto w-full p-4 pb-24">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">To-Do List</h2>
            
            <div class="space-y-2">
                <div v-for="todo in todos" :key="todo.id" class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                         <div @click="toggleTodo(todo.id)" 
                             class="w-6 h-6 rounded-full border-2 flex items-center justify-center cursor-pointer transition-colors"
                             :class="todo.completed ? 'bg-indigo-500 border-indigo-500' : 'border-gray-300'">
                            <i v-if="todo.completed" class="fas fa-check text-white text-xs"></i>
                        </div>
                        <span :class="{'line-through text-gray-400': todo.completed}" class="text-gray-700">{{ todo.text }}</span>
                    </div>
                    <button @click="removeTodo(todo.id)" class="text-gray-300 hover:text-red-500"><i class="fas fa-trash"></i></button>
                </div>
            </div>

            <div class="mt-6 flex gap-2">
                <input v-model="newTodoText" @keyup.enter="addTodo" placeholder="æ–°å¢å¾…è¾¦äº‹é …..." class="flex-1 p-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <button @click="addTodo" class="bg-indigo-600 text-white px-4 rounded-xl font-bold"><i class="fas fa-plus"></i></button>
            </div>
        </div>

    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                const currentPage = ref('welcome');
                const newTodoText = ref('');
                
                // ä½¿ç”¨è€…è¨­å®š
                const userSettings = ref({
                    userName: 'User',
                    partnerName: 'Partner',
                    tripDate: '2026-03-27'
                });

                // å¾…è¾¦äº‹é …è³‡æ–™
                const todos = ref([
                    { id: 1, text: 'é è¨‚æ©Ÿç¥¨', completed: true },
                    { id: 2, text: 'é è¨‚å»£å®‰é‡Œæµ·æ™¯é£¯åº—', completed: false },
                    { id: 3, text: 'è³¼è²·é‡œå±±é€šè¡Œè­‰ (Visit Busan Pass)', completed: false },
                    { id: 4, text: 'æŸ¥è©¢èŠ±ç«ç¯€è§€è³å¸­ä½', completed: false },
                    { id: 5, text: 'å…Œæ›éŸ“å¹£', completed: false },
                ]);

                // è¡Œç¨‹è³‡æ–™ (å·²è£œå…¨éƒ¨åˆ†)
                const itinerary = ref([
                    {
                        date: '3/27 (Fri)',
                        theme: 'æŠµé”é‡œå±±',
                        spots: [
                            { time: '14:00', name: 'é‡‘æµ·æ©Ÿå ´ (PUS) æŠµé”', tag: 'äº¤é€š' },
                            { time: '16:00', name: 'é£¯åº— Check-in (å»£å®‰é‡Œ)', tag: 'ä½å®¿', note: 'ç¢ºèªæµ·æ™¯æˆ¿' },
                            { time: '18:00', name: 'å»£å®‰é‡Œæµ·ç˜æ•£æ­¥', tag: 'æ™¯é»' },
                            { time: '19:30', name: 'çƒ¤è…¸ä¸€æ¢è¡—æ™šé¤', tag: 'ç¾é£Ÿ' }
                        ]
                    },
                    {
                        date: '3/28 (Sat)',
                        theme: 'æµ·å²¸åˆ—è»Šèˆ‡è† å›Š',
                        spots: [
                            { time: '10:00', name: 'æµ·é›²å°è—ç·šå…¬åœ’', tag: 'æ™¯é»', note: 'éœ€æå‰é ç´„è† å›Šåˆ—è»Š' },
                            { time: '12:30', name: 'å°¾æµ¦å®¶æµ·é®®é‹', tag: 'ç¾é£Ÿ' },
                            { time: '15:00', name: 'X the Sky è§€æ™¯å°', tag: 'æ™¯é»' },
                            { time: '19:00', name: 'æµ·é›²å°å‚³çµ±å¸‚å ´', tag: 'é€›è¡—' }
                        ]
                    },
                    {
                        date: '3/29 (Sun)',
                        theme: 'æ–‡åŒ–æ‘èˆ‡å—æµ¦æ´',
                        spots: [
                            { time: '09:30', name: 'ç”˜å·æ´æ–‡åŒ–æ‘', tag: 'æ‹ç…§' },
                            { time: '13:00', name: 'BIFF å»£å ´åƒç³–é¤…', tag: 'ç¾é£Ÿ' },
                            { time: '15:00', name: 'å½±å³¶å¤§æ©‹é–‹æ©‹å„€å¼', tag: 'è¡¨æ¼”' },
                            { time: '18:00', name: 'æ¨‚å¤©è¶…å¸‚æ¡è²·', tag: 'è³¼ç‰©' }
                        ]
                    },
                    {
                        date: '3/30 (Mon)',
                        theme: 'æ©Ÿå¼µæ¾è‘‰èŸ¹',
                        spots: [
                            { time: '11:00', name: 'æ©Ÿå¼µå¸‚å ´åƒæ¾è‘‰èŸ¹', tag: 'ç¾é£Ÿ' },
                            { time: '14:00', name: 'æµ·æ±é¾å®®å¯º', tag: 'æ™¯é»' },
                            { time: '16:30', name: 'Lotte Outlet', tag: 'è³¼ç‰©' },
                            { time: '20:00', name: 'è¥¿é¢åœ°ä¸‹è¡—', tag: 'é€›è¡—' }
                        ]
                    },
                    {
                        date: '3/31 (Tue)',
                        theme: 'SPA èˆ‡æ”¾é¬†',
                        spots: [
                            { time: '10:00', name: 'æ–°ä¸–ç•Œç™¾è²¨ Spa Land', tag: 'é«”é©—' },
                            { time: '14:00', name: 'å»£å®‰é‡Œå’–å•¡å»³çœ‹æµ·', tag: 'æ”¾é¬†' },
                            { time: '18:00', name: 'æ°‘æ¨‚æ°´é‚Šå…¬åœ’', tag: 'é‡é¤' }
                        ]
                    }
                ]);

                // å€’æ•¸è¨ˆæ™‚é‚è¼¯
                const countdown = computed(() => {
                    const target = new Date(userSettings.value.tripDate);
                    const now = new Date();
                    const diff = target - now;
                    
                    if (diff < 0) return { days: 0, hours: 0, minutes: 0, seconds: 0 };

                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                    return { days, hours, minutes, seconds };
                });

                const priorityTodos = computed(() => {
                    return todos.value.filter(t => !t.completed).slice(0, 3);
                });

                const pendingTodos = computed(() => {
                    return todos.value.filter(t => !t.completed).length;
                });

                // Methods
                const toggleTodo = (id) => {
                    const t = todos.value.find(x => x.id === id);
                    if (t) t.completed = !t.completed;
                };

                const addTodo = () => {
                    if (!newTodoText.value.trim()) return;
                    todos.value.push({
                        id: Date.now(),
                        text: newTodoText.value,
                        completed: false
                    });
                    newTodoText.value = '';
                };

                const removeTodo = (id) => {
                    todos.value = todos.value.filter(t => t.id !== id);
                };

                // åŒ¯å‡ºåŠŸèƒ½
                const exportData = () => {
                    const data = {
                        userSettings: userSettings.value,
                        todos: todos.value,
                        itinerary: itinerary.value
                    };
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'busan_trip_data.json';
                    a.click();
                    URL.revokeObjectURL(url);
                    alert('è¡Œç¨‹è³‡æ–™å·²åŒ¯å‡ºï¼è«‹å¦¥å–„ä¿å­˜ã€‚');
                };

                // åŒ¯å…¥åŠŸèƒ½
                const fileInput = ref(null);
                const triggerImport = () => {
                    fileInput.value.click();
                };

                const handleFileUpload = (event) => {
                    const file = event.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.userSettings) userSettings.value = data.userSettings;
                            if (data.todos) todos.value = data.todos;
                            if (data.itinerary) itinerary.value = data.itinerary;
                            alert('è³‡æ–™åŒ¯å…¥æˆåŠŸï¼');
                        } catch (err) {
                            alert('åŒ¯å…¥å¤±æ•—ï¼šæª”æ¡ˆæ ¼å¼éŒ¯èª¤');
                        }
                    };
                    reader.readAsText(file);
                };

                return {
                    currentPage,
                    userSettings,
                    todos,
                    itinerary,
                    countdown,
                    priorityTodos,
                    pendingTodos,
                    toggleTodo,
                    newTodoText,
                    addTodo,
                    removeTodo,
                    exportData,
                    triggerImport,
                    handleFileUpload,
                    fileInput
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
