<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>2026 é‡œå±±èŠ±ç«ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* ç»ç’ƒæ“¬æ…‹èˆ‡æ¼¸å±¤ */
        .glass-nav { 
            background: rgba(255, 255, 255, 0.9); 
            backdrop-filter: blur(12px); 
            border-top: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
        }
        .theme-gradient { background: linear-gradient(135deg, #4f46e5 0%, #9333ea 50%, #db2777 100%); }
        .card-shadow { box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.05); }
        
        /* æ‡¸æµ®æŒ‰éˆ•ç‰¹æ•ˆ */
        .floating-home-btn {
            box-shadow: 0 8px 25px rgba(147, 51, 234, 0.4);
            transform: translateY(-20px);
        }
        .nav-item-active { color: #9333ea; }
        .nav-item-inactive { color: #94a3b8; }

        /* å‹•ç•« */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-up { animation: fadeIn 0.5s ease-out forwards; }
    </style>
</head>
<body class="text-slate-800">

    <div id="app" class="min-h-screen pb-28 relative overflow-x-hidden">
        
        <div v-if="showWelcomePage" @click="enterApp" 
             class="fixed inset-0 z-[100] bg-cover bg-center cursor-pointer"
             style="background-image: url('./welcome.jpg');">
        </div>

        <div v-else class="animate-fade-up">
            
            <header class="theme-gradient text-white pt-14 pb-12 px-6 rounded-b-[2.5rem] shadow-lg relative overflow-hidden mb-[-2rem]">
                <div class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none">
                    <div class="absolute top-10 right-10 text-6xl animate-pulse">âœ¨</div>
                    <div class="absolute bottom-10 left-10 text-4xl">ğŸ†</div>
                </div>

                <div class="relative z-10 text-center">
                    <p class="text-xs opacity-90 tracking-[0.3em] uppercase mb-2">Busan 2026</p>
                    <h1 class="text-3xl font-bold mb-6 tracking-wide drop-shadow-md">
                        é‡œå±±èŠ±ç«ç¯€<br>æ…¢æ´»å¥¢è¯æ—…
                    </h1>
                    
                    <div class="inline-flex items-center justify-center gap-6 py-3 px-8 bg-white/15 backdrop-blur-md rounded-full border border-white/20 shadow-inner">
                        <div class="text-center">
                            <span class="block text-2xl font-bold font-mono text-yellow-300">{{ daysLeft }}</span>
                            <span class="text-[10px] opacity-80 uppercase">Days</span>
                        </div>
                        <div class="h-8 w-px bg-white/30"></div>
                        <div class="text-center">
                            <span class="block text-2xl font-bold font-mono text-pink-300">{{ hoursLeft }}</span>
                            <span class="text-[10px] opacity-80 uppercase">Hrs</span>
                        </div>
                    </div>
                </div>
            </header>

            <div v-if="currentTab === 'home'" class="px-5 relative z-20">
                
                <div v-if="tripStatus === 'prep'" class="space-y-4">
                    <div class="bg-white p-5 rounded-2xl card-shadow border border-slate-100">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="bg-purple-100 text-purple-600 p-2 rounded-lg"><i class="ri-calendar-check-fill"></i></div>
                            <h3 class="font-bold text-lg">è¡Œå‰æº–å‚™é€²åº¦</h3>
                        </div>
                        <p class="text-xs text-gray-500 mb-4">å‡ºç™¼å‰è«‹ç¢ºèªä»¥ä¸‹äº‹é …çš†å·²å®Œæˆã€‚</p>
                        
                        <div class="space-y-3">
                            <div v-for="(item, idx) in prepList" :key="idx" 
                                @click="item.done = !item.done"
                                class="flex items-center justify-between p-3 rounded-xl transition-all cursor-pointer border border-transparent hover:border-purple-100 hover:bg-purple-50/50"
                                :class="item.done ? 'bg-gray-50 opacity-60' : 'bg-white shadow-sm border-gray-100'">
                                <div class="flex items-center gap-3">
                                    <div :class="`w-5 h-5 rounded-full flex items-center justify-center border transition-colors ${item.done ? 'bg-green-500 border-green-500' : 'border-gray-300'}`">
                                        <i v-if="item.done" class="ri-check-line text-white text-xs"></i>
                                    </div>
                                    <span :class="`text-sm font-medium ${item.done ? 'line-through text-gray-400' : 'text-gray-700'}`">{{ item.text }}</span>
                                </div>
                                <i :class="item.icon + ' text-gray-400'"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-5 rounded-2xl card-shadow border border-blue-100">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="font-bold text-slate-700">11æœˆå¤©æ°£é å ±</h3>
                                <p class="text-xs text-slate-500 mt-1">å¹³å‡ 8Â°C - 16Â°C</p>
                            </div>
                            <span class="text-3xl">ğŸ‚</span>
                        </div>
                        <div class="mt-3 bg-white/60 p-3 rounded-xl text-xs text-slate-600 leading-relaxed">
                            ğŸ’¡ <span class="font-bold">ç©¿æ­å»ºè­°ï¼š</span>æ—©æ™šæº«å·®å¤§ï¼Œå»ºè­°ã€Œæ´‹è”¥å¼ç©¿æ³•ã€ã€‚å…§ç©¿ç™¼ç†±è¡£ï¼Œå¤–æ­é¢¨è¡£æˆ–è–„ç¾½çµ¨ï¼Œçœ‹ç…™ç«æ™‚æµ·é‚Šé¢¨å¤§ï¼Œ<span class="text-red-500 font-bold">åœå·¾èˆ‡æš–æš–åŒ…å¿…å‚™ï¼</span>
                        </div>
                    </div>
                </div>

                <div v-else class="space-y-4">
                    <div class="bg-gradient-to-r from-sky-400 to-blue-500 p-5 rounded-2xl text-white shadow-lg shadow-blue-200">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-blue-100 text-xs font-bold uppercase tracking-wider">Busan Now</p>
                                <h2 class="text-4xl font-bold mt-1">{{ currentWeather.temp }}Â°C</h2>
                                <p class="text-sm opacity-90 mt-1">{{ currentWeather.desc }}</p>
                            </div>
                            <div class="text-5xl opacity-90">{{ currentWeather.icon }}</div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-white/20 flex gap-4 text-xs font-medium">
                            <span class="flex items-center gap-1"><i class="ri-windy-line"></i> {{ currentWeather.wind }} km/h</span>
                            <span class="flex items-center gap-1"><i class="ri-drop-line"></i> {{ currentWeather.humidity }}%</span>
                        </div>
                    </div>

                    <div class="bg-white p-5 rounded-2xl card-shadow border border-gray-100">
                        <h3 class="font-bold text-gray-800 mb-2">ğŸ‘” ä»Šæ—¥ç©¿æ­å»ºè­°</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">{{ outfitAdvice }}</p>
                    </div>

                    <button @click="currentTab = 'schedule'" class="w-full bg-purple-50 p-4 rounded-2xl flex items-center justify-between group">
                        <span class="font-bold text-purple-700">æŸ¥çœ‹ä»Šæ—¥è¡Œç¨‹</span>
                        <i class="ri-arrow-right-line text-purple-400 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </div>

            </div>

            <div v-if="currentTab === 'schedule'" class="px-4 pt-8">
                <div class="flex overflow-x-auto space-x-3 pb-4 no-scrollbar mb-2 px-1">
                    <button v-for="(day, index) in itinerary" :key="index"
                        @click="activeDayIndex = index"
                        :class="`flex-shrink-0 px-5 py-2.5 rounded-2xl text-sm font-bold transition-all shadow-sm
                        ${activeDayIndex === index ? 'bg-purple-600 text-white shadow-purple-200' : 'bg-white text-gray-500 border border-gray-100'}`">
                        Day {{ day.day }}
                    </button>
                </div>

                <div class="animate-fade-up">
                    <div class="bg-white rounded-3xl p-6 card-shadow border border-slate-50 min-h-[50vh]">
                        <div class="flex justify-between items-end mb-6 border-b border-gray-100 pb-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800">Day {{ itinerary[activeDayIndex].day }}</h2>
                                <p class="text-sm text-purple-600 font-bold mt-1">{{ itinerary[activeDayIndex].date }}</p>
                            </div>
                            <span class="text-xs font-bold bg-purple-50 text-purple-600 px-3 py-1.5 rounded-lg">
                                {{ itinerary[activeDayIndex].title }}
                            </span>
                        </div>

                        <div class="space-y-8 relative pl-2 ml-2 border-l-2 border-slate-100">
                            <div v-for="(event, idx) in itinerary[activeDayIndex].events" :key="idx" class="relative pl-6">
                                <div :class="`absolute -left-[9px] top-1.5 w-4 h-4 rounded-full border-[3px] border-white shadow-sm z-10
                                    ${event.isImportant ? 'bg-pink-500 ring-2 ring-pink-100' : 'bg-indigo-400'}`">
                                </div>
                                
                                <div>
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="text-xs font-mono font-bold text-slate-400 bg-slate-50 px-1.5 py-0.5 rounded">{{ event.time }}</span>
                                    </div>
                                    <h4 class="font-bold text-slate-800 text-lg mb-1">{{ event.title }}</h4>
                                    <p class="text-sm text-slate-500 leading-relaxed mb-3">{{ event.desc }}</p>
                                    
                                    <button @click="openMap(event.mapQuery)" 
                                        class="inline-flex items-center gap-1.5 text-xs font-bold text-white bg-[#03C75A] px-3 py-1.5 rounded-lg hover:bg-[#02b351] transition-colors shadow-sm">
                                        <i class="ri-map-pin-2-fill"></i> Naver Map
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="currentTab === 'info'" class="px-5 pt-8 space-y-6">
                <section>
                    <h2 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="text-purple-500 text-xl"><i class="ri-hotel-bed-fill"></i></span> ä½å®¿è³‡è¨Š
                    </h2>
                    
                    <div class="grid gap-4">
                        <div class="bg-white rounded-2xl p-5 card-shadow border border-slate-50">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-slate-800">å»£å®‰é‡Œ Hotel 1</h3>
                                    <p class="text-xs text-slate-400 mt-1">æµ·æ™¯ç¬¬ä¸€æ’ â€¢ è† å›Šé£¯åº—</p>
                                </div>
                                <span class="text-[10px] font-bold bg-pink-50 text-pink-600 px-2 py-1 rounded">Day 1-2</span>
                            </div>
                            <div class="mt-4 flex gap-2">
                                <button @click="openMap('Hotel 1 Busan')" class="flex-1 bg-gray-50 hover:bg-gray-100 py-2.5 rounded-xl text-xs font-bold text-gray-600 transition-colors">å°èˆª</button>
                                <button class="flex-1 bg-purple-50 hover:bg-purple-100 py-2.5 rounded-xl text-xs font-bold text-purple-600 transition-colors">è¨‚å–®</button>
                            </div>
                        </div>

                        <div class="bg-white rounded-2xl p-5 card-shadow border border-slate-50">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-slate-800">é˜¿ç­é£¯åº— Arban Hotel</h3>
                                    <p class="text-xs text-slate-400 mt-1">è¥¿é¢ç«™ â€¢ äº¤é€šæ¨ç´</p>
                                </div>
                                <span class="text-[10px] font-bold bg-blue-50 text-blue-600 px-2 py-1 rounded">Day 3-4</span>
                            </div>
                            <div class="mt-4 flex gap-2">
                                <button @click="openMap('Arban Hotel Seomyeon')" class="flex-1 bg-gray-50 hover:bg-gray-100 py-2.5 rounded-xl text-xs font-bold text-gray-600 transition-colors">å°èˆª</button>
                                <button class="flex-1 bg-purple-50 hover:bg-purple-100 py-2.5 rounded-xl text-xs font-bold text-purple-600 transition-colors">è¨‚å–®</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="text-yellow-500 text-xl"><i class="ri-taxi-fill"></i></span> äº¤é€šæŒ‡å—
                    </h2>
                    <div class="bg-white rounded-2xl p-5 card-shadow border border-slate-50 space-y-5">
                        <div class="flex items-center gap-4">
                            <div class="bg-yellow-100 w-10 h-10 rounded-full flex items-center justify-center text-yellow-600 text-xl"><i class="ri-taxi-line"></i></div>
                            <div>
                                <h4 class="font-bold text-sm">Kakao T</h4>
                                <p class="text-xs text-gray-500 mt-0.5">é‡œå±±æ­è»Šå¿…å‚™ï¼Œå¯ç¶å®šä¿¡ç”¨å¡</p>
                            </div>
                        </div>
                        <div class="h-px bg-gray-100"></div>
                        <div class="flex items-center gap-4">
                            <div class="bg-green-100 w-10 h-10 rounded-full flex items-center justify-center text-green-600 text-xl"><i class="ri-subway-line"></i></div>
                            <div class="flex-1">
                                <h4 class="font-bold text-sm">é‡œå±±åœ°éµåœ– (Naver)</h4>
                                <p class="text-xs text-gray-500 mt-0.5">å®˜æ–¹äº’å‹•åœ°åœ–ï¼Œé»æ“Šç«™é»å¯çœ‹æ™‚é–“</p>
                            </div>
                            <a href="https://m.map.naver.com/subway/subwayLine.naver?region=2000" target="_blank" class="bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg hover:bg-green-600">æŸ¥çœ‹</a>
                        </div>
                    </div>
                </section>
            </div>

            <div v-if="currentTab === 'budget'" class="px-5 pt-8 pb-20 space-y-6">
                <div class="bg-gradient-to-r from-slate-800 to-slate-700 rounded-2xl p-6 text-white shadow-xl">
                    <p class="text-xs text-slate-300 mb-1">ç›®å‰ç¸½èŠ±è²» (TWD)</p>
                    <h2 class="text-3xl font-bold font-mono">${{ Math.round(currentTotal * 0.024).toLocaleString() }}</h2>
                    <p class="text-xs text-slate-400 mt-2 font-mono">â‰ˆ â‚©{{ currentTotal.toLocaleString() }} KRW</p>
                </div>

                <div class="bg-white rounded-2xl p-5 card-shadow border border-slate-50">
                    <div class="flex gap-2 mb-4 bg-gray-50 p-1 rounded-xl">
                        <button @click="activeBudgetTab = 'public'" 
                            :class="`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${activeBudgetTab === 'public' ? 'bg-white text-slate-800 shadow-sm' : 'text-gray-400'}`">
                            å…¬å¸³ (åˆ†æ¯)
                        </button>
                        <button @click="activeBudgetTab = 'private'" 
                            :class="`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${activeBudgetTab === 'private' ? 'bg-white text-slate-800 shadow-sm' : 'text-gray-400'}`">
                            å€‹äººè¨˜å¸³
                        </button>
                    </div>

                    <div class="flex gap-2 mb-4">
                        <input v-model="newItemName" type="text" placeholder="å“é …" class="flex-1 bg-gray-50 border-none rounded-xl px-4 py-2.5 text-sm outline-none focus:ring-2 ring-purple-100">
                        <input v-model="newItemPrice" type="number" placeholder="â‚©" class="w-24 bg-gray-50 border-none rounded-xl px-4 py-2.5 text-sm outline-none focus:ring-2 ring-purple-100">
                        <button @click="addItem" class="bg-slate-800 text-white w-10 h-10 rounded-xl flex items-center justify-center hover:bg-slate-700 transition-colors"><i class="ri-add-line"></i></button>
                    </div>

                    <div class="space-y-3 max-h-60 overflow-y-auto no-scrollbar">
                        <div v-for="(item, idx) in currentList" :key="idx" class="flex justify-between items-center text-sm p-3 bg-gray-50 rounded-xl">
                            <span class="text-slate-700 font-medium">{{ item.name }}</span>
                            <div class="flex items-center gap-3">
                                <span class="font-mono text-slate-600">â‚©{{ item.price }}</span>
                                <button @click="deleteItem(idx)" class="text-gray-300 hover:text-red-500"><i class="ri-close-circle-fill"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div v-if="activeBudgetTab === 'public'" class="bg-purple-50 rounded-2xl p-5 border border-purple-100 flex justify-between items-center">
                    <div>
                        <p class="text-xs text-purple-600 font-bold mb-1">æ¯äººæ‡‰ä»˜ ({{ splitCount }}äºº)</p>
                        <p class="text-xl font-bold text-purple-800 font-mono">â‚©{{ Math.round(currentTotal / splitCount).toLocaleString() }}</p>
                    </div>
                    <div class="flex items-center gap-3 bg-white px-3 py-1.5 rounded-lg shadow-sm">
                        <button @click="splitCount = Math.max(1, splitCount-1)" class="text-purple-400 hover:text-purple-700"><i class="ri-subtract-line"></i></button>
                        <span class="text-sm font-bold text-purple-800 w-4 text-center">{{ splitCount }}</span>
                        <button @click="splitCount++" class="text-purple-400 hover:text-purple-700"><i class="ri-add-line"></i></button>
                    </div>
                </div>
            </div>

            <div v-if="currentTab === 'checklist'" class="px-5 pt-8 space-y-4">
                <h2 class="text-lg font-bold text-slate-800 mb-2">è¡Œææ¸…å–®</h2>
                <div class="bg-white rounded-2xl overflow-hidden card-shadow border border-slate-50">
                    <div v-for="(item, idx) in packingList" :key="idx" 
                        @click="item.done = !item.done"
                        class="flex items-center p-4 border-b border-gray-50 last:border-0 hover:bg-gray-50 transition-colors cursor-pointer">
                        <div :class="`w-5 h-5 rounded-md border flex items-center justify-center mr-4 transition-colors ${item.done ? 'bg-purple-500 border-purple-500' : 'border-gray-300'}`">
                            <i v-if="item.done" class="ri-check-line text-white text-xs"></i>
                        </div>
                        <span :class="`text-sm font-medium flex-1 ${item.done ? 'text-gray-400 line-through' : 'text-slate-700'}`">{{ item.text }}</span>
                    </div>
                </div>
            </div>

        </div> <nav v-if="!showWelcomePage" class="fixed bottom-0 left-0 right-0 glass-nav z-50 pb-safe">
            <div class="grid grid-cols-5 items-end h-16 max-w-md mx-auto relative">
                
                <button @click="currentTab = 'schedule'" class="flex flex-col items-center justify-center h-full pb-1 group">
                    <i :class="`text-xl mb-1 transition-colors ${currentTab === 'schedule' ? 'ri-calendar-event-fill text-purple-600' : 'ri-calendar-line text-slate-400'}`"></i>
                    <span :class="`text-[10px] font-medium transition-colors ${currentTab === 'schedule' ? 'text-purple-600' : 'text-slate-400'}`">è¡Œç¨‹</span>
                </button>

                <button @click="currentTab = 'info'" class="flex flex-col items-center justify-center h-full pb-1 group">
                    <i :class="`text-xl mb-1 transition-colors ${currentTab === 'info' ? 'ri-hotel-fill text-purple-600' : 'ri-hotel-line text-slate-400'}`"></i>
                    <span :class="`text-[10px] font-medium transition-colors ${currentTab === 'info' ? 'text-purple-600' : 'text-slate-400'}`">è³‡è¨Š</span>
                </button>

                <div class="relative flex justify-center h-full">
                    <button @click="currentTab = 'home'" 
                        class="absolute -top-6 w-14 h-14 rounded-full bg-gradient-to-tr from-purple-600 to-pink-500 text-white flex items-center justify-center floating-home-btn transition-transform active:scale-95">
                        <i class="ri-home-4-fill text-2xl"></i>
                    </button>
                    <span :class="`absolute bottom-1 text-[10px] font-medium transition-colors ${currentTab === 'home' ? 'text-purple-600' : 'text-slate-400'}`">é¦–é </span>
                </div>

                <button @click="currentTab = 'budget'" class="flex flex-col items-center justify-center h-full pb-1 group">
                    <i :class="`text-xl mb-1 transition-colors ${currentTab === 'budget' ? 'ri-wallet-3-fill text-purple-600' : 'ri-wallet-3-line text-slate-400'}`"></i>
                    <span :class="`text-[10px] font-medium transition-colors ${currentTab === 'budget' ? 'text-purple-600' : 'text-slate-400'}`">è¨˜å¸³</span>
                </button>

                <button @click="currentTab = 'checklist'" class="flex flex-col items-center justify-center h-full pb-1 group">
                    <i :class="`text-xl mb-1 transition-colors ${currentTab === 'checklist' ? 'ri-checkbox-multiple-fill text-purple-600' : 'ri-checkbox-multiple-line text-slate-400'}`"></i>
                    <span :class="`text-[10px] font-medium transition-colors ${currentTab === 'checklist' ? 'text-purple-600' : 'text-slate-400'}`">æ¸…å–®</span>
                </button>

            </div>
        </nav>

    </div>

    <script>
        const { createApp, ref, computed, onMounted, watch } = Vue;

        createApp({
            setup() {
                // --- ç‹€æ…‹æ§åˆ¶ ---
                const showWelcomePage = ref(true);
                const currentTab = ref('home');
                const activeDayIndex = ref(0);
                const activeBudgetTab = ref('public');
                const splitCount = ref(2);

                // --- æ™ºæ…§é¦–é  (Smart Home) ---
                // 'prep' = å‡ºç™¼å‰, 'travel' = æ—…é€”ä¸­
                // é€™è£¡ç‚ºäº†æ¼”ç¤ºï¼Œå¦‚æœå¤©æ•¸>0å‰‡ç‚ºprepï¼Œå¦å‰‡ç‚ºtravel
                const tripStatus = computed(() => daysLeft.value > 0 ? 'prep' : 'travel'); 
                
                // è¡Œå‰æª¢æŸ¥æ¸…å–® (é¦–é ç”¨)
                const prepList = ref([
                    { text: 'é è¨‚æ©Ÿç¥¨ (Air Busan)', done: true, icon: 'ri-plane-fill' },
                    { text: 'é è¨‚é£¯åº— (Hotel 1)', done: true, icon: 'ri-hotel-bed-fill' },
                    { text: 'é ç´„è† å›Šåˆ—è»Š', done: false, icon: 'ri-train-fill' },
                    { text: 'è³¼è²·ç¶²å¡/æ¼«éŠ', done: false, icon: 'ri-signal-tower-fill' },
                    { text: 'æŠ•ä¿æ—…éŠå¹³å®‰éšª', done: false, icon: 'ri-shield-check-fill' },
                    { text: 'ä¸‹è¼‰ Kakao T / Naver Map', done: false, icon: 'ri-apps-fill' }
                ]);

                // å³æ™‚å¤©æ°£ (æ¨¡æ“¬ API çµæ§‹)
                const currentWeather = ref({ temp: 12, desc: 'æ™´æ™‚å¤šé›²', icon: 'ğŸŒ¤ï¸', wind: 15, humidity: 45 });
                const outfitAdvice = computed(() => {
                    const t = currentWeather.value.temp;
                    if (t < 10) return "ğŸ§£ å¯’å†·è­¦å ±ï¼è«‹ç©¿è‘—åšå¤§è¡£ã€ç™¼ç†±è¡£ï¼Œä¸¦æ”œå¸¶åœå·¾èˆ‡æ‰‹å¥—ã€‚";
                    if (t < 18) return "ğŸ§¥ æ¶¼çˆ½èˆ’é©ã€‚å»ºè­°ç©¿è‘—é•·è¢–ä¸Šè¡£æ­é…é¢¨è¡£æˆ–é‡ç¹”å¤–å¥—ï¼Œæ´‹è”¥å¼ç©¿æ­æœ€ä½³ã€‚";
                    return "ğŸ‘• æº«æš–å®œäººã€‚è–„é•·è¢–æˆ–çŸ­è¢–æ­é…è–„å¤–å¥—å³å¯ã€‚";
                });

                // --- è¨˜å¸³è³‡æ–™ ---
                const publicExpenses = ref([]);
                const privateExpenses = ref([]);
                const newItemName = ref('');
                const newItemPrice = ref('');
                
                // --- æ ¸å¿ƒè¨­å®š ---
                const startDate = "2026-11-13T14:30:00";
                const daysLeft = ref(0);
                const hoursLeft = ref(0);

                // --- åˆå§‹åŒ–èˆ‡é‚è¼¯ ---
                const calculateCountdown = () => {
                    const now = new Date().getTime();
                    const target = new Date(startDate).getTime();
                    const diff = target - now;
                    if (diff > 0) {
                        daysLeft.value = Math.floor(diff / (1000 * 60 * 60 * 24));
                        hoursLeft.value = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    }
                };

                // æ¨¡æ“¬ç²å–å¤©æ°£ (å› ç‚ºæ˜¯2026å¹´ï¼Œé€™è£¡æŠ“å–ç•¶ä¸‹é‡œå±±å¤©æ°£ä½œç‚ºæ¼”ç¤º)
                const fetchWeather = async () => {
                    try {
                        // ä½¿ç”¨ Open-Meteo å…è²» API æŠ“å–é‡œå±±å³æ™‚å¤©æ°£
                        const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=35.1796&longitude=129.0756&current_weather=true');
                        const data = await res.json();
                        if(data.current_weather) {
                            currentWeather.value.temp = data.current_weather.temperature;
                            currentWeather.value.wind = data.current_weather.windspeed;
                            // ç°¡å–®çš„å¤©æ°£ä»£ç¢¼è½‰æ› (ç°¡åŒ–ç‰ˆ)
                            const code = data.current_weather.weathercode;
                            if(code <= 3) { currentWeather.value.desc = 'æ™´æœ—/å¤šé›²'; currentWeather.value.icon = 'ğŸŒ¤ï¸'; }
                            else if(code <= 67) { currentWeather.value.desc = 'æœ‰é›¨'; currentWeather.value.icon = 'ğŸŒ§ï¸'; }
                            else { currentWeather.value.desc = 'å¤šè®Š'; currentWeather.value.icon = 'ğŸŒ¥ï¸'; }
                        }
                    } catch (e) { console.log("Weather fetch failed"); }
                };

                onMounted(() => {
                    calculateCountdown();
                    fetchWeather();
                    // Load Expenses from local storage
                    const savedPublic = localStorage.getItem('busan_public');
                    if (savedPublic) publicExpenses.value = JSON.parse(savedPublic);
                });

                // è¨˜å¸³é‚è¼¯
                const currentList = computed(() => activeBudgetTab.value === 'public' ? publicExpenses.value : privateExpenses.value);
                const currentTotal = computed(() => currentList.value.reduce((sum, item) => sum + Number(item.price), 0));
                
                const addItem = () => {
                    if (!newItemName.value || !newItemPrice.value) return;
                    currentList.value.push({ name: newItemName.value, price: newItemPrice.value });
                    // Auto save
                    localStorage.setItem(activeBudgetTab.value === 'public' ? 'busan_public' : 'busan_private', JSON.stringify(currentList.value));
                    newItemName.value = ''; newItemPrice.value = '';
                };
                
                const deleteItem = (index) => {
                    currentList.value.splice(index, 1);
                    localStorage.setItem(activeBudgetTab.value === 'public' ? 'busan_public' : 'busan_private', JSON.stringify(currentList.value));
                };

                const enterApp = () => showWelcomePage.value = false;
                const openMap = (query) => {
                    window.open(`https://m.map.naver.com/search2/search.naver?query=${encodeURIComponent(query)}`, '_blank');
                };

                // --- è³‡æ–™ ---
                const itinerary = [
                    { day: 1, date: "11/13 (äº”)", title: "æŠµé”èˆ‡æµ·æ¿±", events: [ { time: "14:30", title: "é‡‘æµ·æ©Ÿå ´", desc: "é ˜ WOWPASSï¼Œæ­è¨ˆç¨‹è»Š (40åˆ†)", mapQuery: "ê¹€í•´êµ­ì œê³µí•­", isImportant: false }, { time: "16:00", title: "Check-in", desc: "å»£å®‰é‡Œæµ·æ™¯ç¬¬ä¸€æ’", mapQuery: "ê´‘ì•ˆë¦¬í•´ìˆ˜ìš•ì¥", isImportant: true }, { time: "18:00", title: "å‘³è´Šç‹é¹½çƒ¤è‚‰", desc: "å°ˆäººä»£çƒ¤åšåˆ‡è±¬äº”èŠ±", mapQuery: "ë§›ì°¬ë“¤ì™•ì†Œê¸ˆêµ¬ì´ ê´‘ì•ˆë¦¬" } ] },
                    { day: 2, date: "11/14 (å…­)", title: "ç…™ç«ç››å®´", events: [ { time: "11:00", title: "è† å›Šåˆ—è»Š", desc: "å°¾æµ¦ç«™å‡ºç™¼ (éœ€é ç´„)", mapQuery: "í•´ìš´ëŒ€ë¸”ë£¨ë¼ì¸íŒŒí¬ ë¯¸í¬ì •ê±°ì¥" }, { time: "15:00", title: "å›é£¯åº—å‚™æˆ°", desc: "å¸¶ç‚¸é›å›æˆ¿ï¼Œé¿é–‹äººæ½®", mapQuery: "ê´‘ì•ˆë¦¬í•´ìˆ˜ìš•ì¥", isImportant: true }, { time: "20:00", title: "é‡œå±±ç…™ç«ç¯€", desc: "æˆ¿å…§çœ‹ç…™ç«ï¼Œäº«å—ç§äººæ™‚å…‰", mapQuery: "ê´‘ì•ˆëŒ€êµ" } ] },
                    { day: 3, date: "11/15 (æ—¥)", title: "æ…¶å·åŒ…è»Š", events: [ { time: "11:00", title: "å‰å¾€æ…¶å·", desc: "åŒ…è»Šä¸€æ—¥éŠ", mapQuery: "ê²½ì£¼" }, { time: "13:00", title: "çš‡ç†åœ˜è·¯", desc: "éŸ“å±‹å’–å•¡å»³åˆé¤", mapQuery: "í™©ë¦¬ë‹¨ê¸¸" }, { time: "17:30", title: "æ±å®®èˆ‡æœˆæ± ", desc: "å¤œæ™¯å¿…æ‹", mapQuery: "ë™ê¶ê³¼ ì›”ì§€" } ] },
                    { day: 4, date: "11/16 (ä¸€)", title: "ç”˜å·èˆ‡è³¼ç‰©", events: [ { time: "11:00", title: "ç”˜å·æ´æ–‡åŒ–æ‘", desc: "ç©¿éŸ“æœæ‰¾å°ç‹å­", mapQuery: "ê°ì²œë¬¸í™”ë§ˆì„" }, { time: "15:00", title: "å—æµ¦æ´", desc: "æ¨‚å¤©è¶…å¸‚æ¡è²·", mapQuery: "ë¡¯ë°ë§ˆíŠ¸ ê´‘ë³µì " } ] },
                    { day: 5, date: "11/17 (äºŒ)", title: "è¿”ç¨‹", events: [ { time: "11:00", title: "æ©Ÿå ´å…ç¨…åº—", desc: "æœ€å¾Œè£œè²¨", mapQuery: "ê¹€í•´êµ­ì œê³µí•­" } ] }
                ];

                const packingList = ref([
                    { text: 'è­·ç…§ (æ•ˆæœŸ>6å€‹æœˆ)', done: false }, { text: 'WOWPASS / T-Money', done: false }, { text: 'ESIM / æ¼«éŠé–‹é€š', done: false }, 
                    { text: 'è½‰æ¥é ­ (éŸ“åœ‹åœ“å­”)', done: false }, { text: 'å€‹äººè—¥å“ / æšˆè»Šè—¥', done: false }, { text: 'ç‰™åˆ·ç‰™è†', done: false }
                ]);

                return {
                    showWelcomePage, enterApp, currentTab, 
                    daysLeft, hoursLeft, tripStatus,
                    prepList, currentWeather, outfitAdvice,
                    activeDayIndex, itinerary, openMap,
                    activeBudgetTab, splitCount, newItemName, newItemPrice, currentList, currentTotal, addItem, deleteItem,
                    packingList
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
